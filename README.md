# 3AE整站介绍

| 修订版本 | 修订内容  | 修订人员 | 文档类型 | 修订日期 |
| :-----: |  :-----:  | :-----: | :-----: | :-----: |
|  v1.0.1.* | 3AE整站介绍 | sid | -- | 2018-12-04 |
|  v1.0.2.* | 3AE整站后台架构优化 | sid | -- | 2018-12-25 |
| ————— | —————————————————————————— | ————— | ————— | —————— |

版本号说明

* 版本号第四位: 修剪文档语句结构、内容布局，不计入修订版本。
* 版本号第三位: 二级模块内容、结构进行更新，计入修订版本。
* 版本号第二位: 一级模块内容、结构进行更新，计入修订版本。
* 版本号第一位: 不限于整个文档进行升级、包含的内容同时进行版本迭代，计入修订版本并生成新的文档。

修改文档名为：
1.快照版（同布更新）
2.稳定版（只维护，不更新）
3.最终版（不更新、不维护）

---

## 鸣谢

感谢身边的家人;  
感谢南京睿实消防设备有限公司；  
感谢身边的领导；  
感谢带我的小哥；  
感谢身边的同事；  
感谢身边的朋友。  

## Situation

这个项目的开始主要是以下几个原因：

* 上家公司是和京东合作的跨境电商公司。后来由于各种问题导致公司散伙不做了。但我不忍心丢弃那些耗费了大量脑力、体力、心力后遗留下的电商业务代码。所以想在原来项目的基础上、按照阿里和京东的业务需求和编码规范再创造出属于我个人的电商工程（框架）。
* 现任公司是一家以物联网为方向发展的消防公司。公司目前使用的Srping技术栈，正在经历一个从零到一的发展阶段。由于我在北京做的WEB前端工程师、因此我在java方面还处在学徒工阶段。急需要一个边学边实践边维护的项目。
* 从前端到后端，其实需要经历许多学习编程语言、开发环境、构建工具和编程习惯的阶段。在大多数人的眼里，毕业一两年的程序员根本不可能在这么杂的大环境下来熟练掌握一种开发方式，更别提既做前端、又做后端，还能把整站做的和大厂的开发标准看齐。
* 不想当将军的士兵不是一个好士兵。同理，不像当运维的测试不是一个好开发。要想成为大手子必须要经历一个给自己造轮子，接着给别人造轮子，最后成为别人眼中的硬通货的经历。因此，个人项目的好坏很容易看出一个程序员的编码水平和业务理解能力。对为了职业生涯有着不可磨灭的影响。
* 我想把所有的知道的业务，功能，各种稀奇古怪好玩儿的东西全部融合在我的个人作品里，然后给同行的SHOW。去展现个人编程能力的强大之处。
* 我想证明给所有人看，以上我提到的所有内容，别人或许不可以，但是我行。而且做的比大厂高P的程序员做的更好，同级别下、我最强！
* 你有梦想吗？精通软硬件。

友情提示：

1. 曾经被各种各样的人鄙视过、嘲讽过、害怕过、打击过、崇拜过、鼓励过……但还是一如往常的坚持。
2. 现在的我已经不需要鲜花、掌声、工资等一切外来因素来获取满足感、来证明自己很优秀了。
3. 心态很重要。没有想成为最强的心，以及成为最强的付出与努力。永远不可能成为最强。
4. 努力成为自己曾经艳羡的人，总有一天也会有人艳羡我。
5. 人生在世，有很多东西比野心更珍贵。

基于以上原因，我在“三脚猫的功夫”下建立起了3AE(个人域名)架构，它会随着业务的完善和个人能力成长来逐渐演变成一套大型易扩展的系统。

## Task

该工程是JAVA架构  
  
最近也在学习如何利用Netyy框架去构建一个SOA、RPC类似dubbo这样架构  
主流的架构Spring cloud

这一版都做了哪些内容，怎么想的、接下来什么打算？

内容

* 看了许多的入门java视频，然后根据我自己的工作经验建起了第一版架构方案。
* 学习了慕课网上两位大佬的java框架教程：Spring and SpringCloud。各有千秋、俯拾仰取。
* 把视频的长处融合在一起，在之前的架构基础之上进行了两次迭代，第二版Java->Spring、 第三版SpringCloud->Spring。
* 我在水潭里扑腾了两个多月，今天终于找到了一些灵感，然后建立起了第四版架构的雏形。

打算

* 先实现功能业务
* 拆分成独立模块
* 聚合分类整理成内核模块、插槽模块、业务模块。

## Action

ORM -> MVC -> RPC -> SOA

康威定律：任何组织在设计一套系统（广义概念上的系统）时，所交付的设计方案在结构上都与该组织的沟通结构保持一致。

* 沟通的问题，会影响设计

情景：

项目大到分布到不同的地点，甚至跨时区了。协调成本会急剧增加，很可能会下意识地减少沟通，迭代的速度就会降低甚至停止变更。微服务提倡组成小团队，由小团队负责整个系统的设计和实现，团队内部可以频繁地、细粒度地沟通。业务架构总是和团队组织的架构相匹配，当把一个大的系统拆分成小的服务时，团队也会随之拆分变化。是否使用微服务不仅仅是一个技术栈的问题，而且是和团队组织结构上的管理问题。微服务的架构的问题是团队之间的运作和管理问题。

特点：

* 大量细小颗粒
* 独立开发
* 单独部署
* 分布式管理
* 每个业务是一个服务，每个服务由一个小团队来维护

服务拆分:

* 水平复制
* "数据"分区
* 功能"解耦"

## Result

从AllInOne转变到了分层和分化。原本想应用DDD驱动模型，但有些业务模块思路还不是很清晰。因此简单的拆分一下。

Spring -> Springboot -> SpringCloud 就差一个ESB

未实现功能：

* 服务发现与注册

```utf-8
JAVA架构

3ae-parent      pom管理
3ae-channel     底层通信
>====================================>  core
------- 数据存储层 -------
3ae-pojo        对象实体
3ae-dao         数据对象
------- 数据封装层 -------
3ae-vo          视图对象
3ae-dto         传输
------- 数据操作层 -------
3ae-common      公共函数
3ae-service     B/S微服务
------- 传输结果层 -------
3ae-api         RESTful
3ae-answer      RPC
------- 生产运行层 -------
3ae-exception   网站异常捕获
3ae-journal     日志文件
3ae-job         自动运行
------- 用户访问层 -------
3ae-admin       后台管理
3ae-user        用户中心
>====================================>  服务端代理服务器 继承服务端
------- 数据操作层 -------
3ae-server      C/S微服务,服务端服务代理
------- 用户访问层 -------
3ae-portal      门户
>====================================>  客户端代理服务器 继承服务端
------- 数据操作层
3ae-agent       C/S微服务,客户端服务代理
```

## 迷思录


## 一些约束,接下来每天所做的一些内容

1、图片编码格式采用YUV420sp

```utf-8
主要使用netty框架
3ae-channel -> io.netty
根据国标BT601（标清）和BT709（高清）两种转换方式，分了模拟和数字两种。
后期可能会在这个基础之上实现图像传输。（UDP）
```

2、sonarqube的maven配置

```shell
  mvn sonar:sonar \
  -Dsonar.host.url=http://localhost:9000 \
  -Dsonar.login=d9be46eadefc3bc0f5f9cde712980d51cf9053a1
```

3、配了阿里云的rdc.aliyun.com

4、更新了njrs-rd59的代码分析

5、配置了海康的SDK

6、配置了线上的markdown的预览功能  
[刍易-知难行易](http://3ae.store)  
[看云-个人文档](http://book.3ae.store)  